# ECLIA project configuration (TOML)
# This file is safe to commit (no secrets).
# For machine-specific overrides (ports, keys), create: eclia.config.local.toml (gitignored)

[console]
# Vite dev server host/port
host = "127.0.0.1"
port = 5173

[api]
# Gateway API server port (dev)
port = 8787

[memory]
# Memory service (dev).
# When enabled, the gateway will call:
#   - POST /recall (before prompt assembly)
enabled = false
host = "127.0.0.1"
port = 8788

# How many recent user-turns to include in each /recall request as fallback transcript.
# Range: 0–64
recent_turns = 8

# Max memories requested per /recall call.
# Range: 0–200
recall_limit = 20

# Gateway HTTP timeout for /recall requests (milliseconds).
# Range: 50–60000
timeout_ms = 1200

[memory.embeddings]
# Embeddings sidecar (local).
# Model id resolved by sentence-transformers (Hugging Face Hub).
# Examples: "all-MiniLM-L6-v2", "all-mpnet-base-v2"
model = "all-MiniLM-L6-v2"

[skills]
# Skills are optional capability packs stored under: skills/<name>/skill.md
#
# Enable skills by listing names that EXACTLY match their directory names.
# Default: none enabled.
enabled = []

[inference]
# Current MVP: OpenAI-compatible provider (works with any OpenAI-like API).
provider = "openai_compat"

# Provider profiles.
# The Console can configure multiple profiles per provider.

[[inference.openai_compat.profiles]]
id = "default"
name = "Default"

# Example: "https://api.openai.com/v1"
# For Minimax/OpenAI-compatible, set their base URL here.
base_url = "https://api.openai.com/v1"

# Real upstream model id (NOT the UI route key).
model = "gpt-4o-mini"

# Secrets belong in eclia.config.local.toml:
# api_key = "..."
auth_header = "Authorization"

[[inference.anthropic.profiles]]
id = "default"
name = "Anthropic Default"

# Example: "https://api.anthropic.com"
base_url = "https://api.anthropic.com"

# Real upstream model id (NOT the UI route key).
model = "claude-opus-4-6"

# Secrets belong in eclia.config.local.toml:
# api_key = "..."
auth_header = "x-api-key"
anthropic_version = "2023-06-01"

[adapters.discord]
# Discord adapter (optional).
# Enable this to allow the Discord adapter process to start and authenticate.
enabled = false

# Application ID / Client ID (not a secret), required to register slash commands.
# You can keep it in eclia.config.local.toml if you prefer machine-specific settings.
# app_id = "123456789012345678"

# Secrets belong in eclia.config.local.toml:
# bot_token = "..."

# Optional: register slash commands as guild-scoped commands (fast iteration).
# If omitted or empty, commands are registered globally (slower propagation).
# guild_ids = ["123456789012345678", "987654321098765432"]

[adapters.telegram]
# Telegram adapter (optional).
# Private chats: reply only to users in user_whitelist.
# Groups/supergroups: reply only in chats in group_whitelist, and only when invoked via /eclia.
enabled = false

# Secrets belong in eclia.config.local.toml:
# bot_token = "..."

# Allowed Telegram user ids (numbers) as strings.
# user_whitelist = ["123456789"]

# Allowed Telegram group/supergroup chat ids (numbers, usually negative) as strings.
# group_whitelist = ["-1001234567890"]

[plugins.listener.email]
# Email triage daemon (optional).
#
# Watches IMAP mailboxes via ImapFlow (IDLE) and asks the model (no context) to decide
# whether an email is worth notifying the user about. If it is, the model will use
# the `send` tool to send an alert to the configured destination.
enabled = false

# Configure one or more IMAP accounts.
#
# Secrets belong in eclia.config.local.toml:
#   pass = "..."
#
# Example:
#
# [[plugins.listener.email.accounts]]
# id = "work"
# host = "imap.example.com"
# port = 993
# secure = true
# user = "me@example.com"
# pass = "..."          # put this in local overrides
# mailbox = "INBOX"      # optional
# criterion = "Notify me when the email is from my manager, or contains URGENT, or needs action within 24h."
# model = "openai_compat:default"  # optional route key
# max_body_chars = 12000  # optional
#
# [plugins.listener.email.accounts.notify]
# kind = "discord"       # discord|telegram
# channel_id = "123456789012345678"
